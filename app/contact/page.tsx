import Image from "next/image"
import Link from "next/link"
import HeaderPortfolio from "@/components/header-portfolio"
import Footer from "@/components/footer"
import { batchFetchSanityData, urlFor } from "@/lib/sanity"

export default async function Contact() {
  // Batch fetch contact info from Sanity
  const data: { contactInfo?: any } = await batchFetchSanityData({
    contactInfo: { query: '*[_type == "contactInfo"][0]' }
  }) || {}

  // Extract data from batch response with explicit type
  const contactInfo = data?.contactInfo || {}
  return (
    <div className="min-h-screen flex flex-col bg-[#000000] text-white">
      {/* Background pattern */}
      <div className="fixed inset-0 z-0">
        <div className="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-[#1a1a1a] to-transparent opacity-50"></div>
        <div className="absolute bottom-0 left-0 w-1/2 h-full bg-gradient-to-r from-[#1a1a1a] to-transparent opacity-50"></div>
      </div>

      {/* Main content */}
      <div className="relative z-10 flex flex-col flex-grow">
        <HeaderPortfolio />

        {/* Main content */}
        <main className="container mx-auto px-4 sm:px-6 lg:px-8 pt-24 flex-grow">
          <div className="max-w-4xl mx-auto">
            {/* Contact card */}
            <div className="bg-[#1a1a1a] rounded-2xl p-8 lg:p-12 fade-in">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                {/* Left side - Contact Info */}
                <div className="slide-in-left">
                  {/* Title section */}
                  <div className="mb-12">
                    <h1 className="text-4xl lg:text-5xl font-bold mb-2">{contactInfo?.title || 'CONTACT'}</h1>
                    <p className="text-gray-400 text-lg">{contactInfo?.subtitle || 'For Photography'}</p>
                  </div>

                  {/* Contact info */}
                  <div className="space-y-6 mb-12">
                    <h2 className="text-2xl font-light">{contactInfo?.photographerName || 'Thá»©c ( Photographer )'}</h2>
                    <div className="space-y-2">
                      <p className="text-gray-400">{contactInfo?.email || 'thucnhthuc@gmail.com'}</p>
                      <p className="text-gray-400">{contactInfo?.phone || '(+84) 0814019555'}</p>
                    </div>
                  </div>

                  {/* Social links */}
                  <div className="flex gap-4">
                    {contactInfo?.socialLinks ? (
                      // Render social links from Sanity
                      contactInfo.socialLinks.map((link: { _key: string; platform?: string; url?: string }) => {
                        // Determine which icon to show based on platform
                        let icon: React.ReactNode = null;

                        if (link.platform === 'instagram') {
                          icon = (
                            <svg className="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                          );
                        } else if (link.platform === 'facebook') {
                          icon = (
                            <svg className="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                          );
                        } else if (link.platform === 'behance') {
                          icon = (
                            <svg className="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M7.803 5.731c.589 0 1.119.051 1.605.155.483.103.895.273 1.243.508.343.235.611.553.804.951.195.398.291.879.291 1.438 0 .612-.141 1.121-.43 1.525-.286.407-.7.739-1.241 1.001.748.218 1.307.602 1.679 1.158.374.554.557 1.225.557 2.012 0 .637-.116 1.191-.345 1.666-.232.473-.55.863-.959 1.17-.407.307-.875.536-1.402.683a6.607 6.607 0 0 1-1.69.219H2V5.731h5.803zm-.351 4.972c.48 0 .878-.114 1.192-.345.312-.228.463-.604.463-1.119 0-.286-.051-.522-.151-.707a1.114 1.114 0 0 0-.417-.428 1.683 1.683 0 0 0-.597-.215 3.609 3.609 0 0 0-.697-.061H4.71v2.875h2.742zm.151 5.239c.267 0 .521-.023.76-.077.241-.052.455-.136.637-.261.182-.12.332-.283.44-.491.109-.206.162-.475.162-.798 0-.634-.179-1.085-.533-1.358-.355-.27-.831-.404-1.414-.404H4.71v3.39h2.893zm8.565-8.521c.571 0 1.088.048 1.55.144.46.097.853.241 1.18.428.324.19.575.436.755.744.178.31.267.675.267 1.093h-2.367c0-.4-.118-.734-.353-.995-.234-.262-.646-.394-1.229-.394-.312 0-.577.033-.793.097a1.491 1.491 0 0 0-.533.269 1.05 1.05 0 0 0-.299.406 1.447 1.447 0 0 0-.094.51c0 .199.034.365.094.51.064.144.173.27.328.375.156.105.363.199.623.286l.855.27c.405.125.788.269 1.146.428.358.162.677.353.957.57.28.22.5.485.665.799.163.314.242.689.242 1.124 0 .536-.102.993-.305 1.373-.202.378-.48.691-.838.938-.355.245-.775.428-1.253.55-.478.12-.999.18-1.562.18-.643 0-1.207-.056-1.689-.165-.484-.112-.886-.28-1.217-.51a2.179 2.179 0 0 1-.74-.866c-.166-.353-.25-.776-.25-1.271h2.367c0 .24.039.446.112.619a.955.955 0 0 0 .344.413c.156.105.35.18.581.225.232.045.505.068.826.068.312 0 .574-.03.786-.091.212-.064.384-.146.511-.245a.864.864 0 0 0 .286-.384c.058-.15.086-.314.086-.495a.985.985 0 0 0-.122-.51 1.151 1.151 0 0 0-.368-.368 2.96 2.96 0 0 0-.601-.287l-.83-.245a15.53 15.53 0 0 1-1.229-.421 3.5 3.5 0 0 1-.955-.533 2.207 2.207 0 0 1-.611-.757c-.143-.295-.216-.649-.216-1.063 0-.488.093-.923.28-1.301.189-.379.45-.694.786-.949.336-.253.729-.443 1.175-.571.448-.127.934-.19 1.458-.19zm-8.953-3.482h5.783v1.466h-5.783zM24 10.237v6.539c0 .506-.077.98-.232 1.423-.154.439-.395.83-.724 1.172a3.457 3.457 0 0 1-1.223.796c-.486.194-1.055.29-1.704.29-.65 0-1.214-.096-1.692-.29a3.538 3.538 0 0 1-1.229-.796 3.473 3.473 0 0 1-.743-1.172 4.052 4.052 0 0 1-.258-1.423v-6.539c0-.471.083-.922.25-1.352.166-.43.41-.812.73-1.146a3.495 3.495 0 0 1 1.229-.773 4.694 4.694 0 0 1 1.713-.284c.595 0 1.131.095 1.61.284.477.19.885.45 1.223.773.336.334.595.715.775 1.146.18.43.27.881.27 1.352zm-2.367.283c0-.327-.063-.599-.19-.824a1.59 1.59 0 0 0-.496-.533 2.15 2.15 0 0 0-.69-.297 2.891 2.891 0 0 0-.749-.091c-.268 0-.518.03-.756.091a1.89 1.89 0 0 0-.638.297 1.502 1.502 0 0 0-.446.533 1.6 1.6 0 0 0-.166.824v6.403c0 .327.056.61.166.85.108.242.258.44.446.594.19.152.408.264.651.338.245.073.51.11.795.11.285 0 .548-.037.786-.11a1.84 1.84 0 0 0 .63-.338c.174-.152.312-.352.415-.594.103-.24.154-.523.154-.85v-6.403z"/>
                            </svg>
                          );
                        }

                        return (
                          <Link
                            key={link._key}
                            href={link.url || '#'}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="text-gray-400 hover:text-white transition-colors"
                          >
                            {icon}
                          </Link>
                        );
                      })
                    ) : (
                      // Fallback social links
                      <>
                        <Link href="#" className="text-gray-400 hover:text-white transition-colors">
                          <svg className="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                          </svg>
                        </Link>
                        <Link href="#" className="text-gray-400 hover:text-white transition-colors">
                          <svg className="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                          </svg>
                        </Link>
                        <Link href="#" className="text-gray-400 hover:text-white transition-colors">
                          <svg className="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.803 5.731c.589 0 1.119.051 1.605.155.483.103.895.273 1.243.508.343.235.611.553.804.951.195.398.291.879.291 1.438 0 .612-.141 1.121-.43 1.525-.286.407-.7.739-1.241 1.001.748.218 1.307.602 1.679 1.158.374.554.557 1.225.557 2.012 0 .637-.116 1.191-.345 1.666-.232.473-.55.863-.959 1.17-.407.307-.875.536-1.402.683a6.607 6.607 0 0 1-1.69.219H2V5.731h5.803zm-.351 4.972c.48 0 .878-.114 1.192-.345.312-.228.463-.604.463-1.119 0-.286-.051-.522-.151-.707a1.114 1.114 0 0 0-.417-.428 1.683 1.683 0 0 0-.597-.215 3.609 3.609 0 0 0-.697-.061H4.71v2.875h2.742zm.151 5.239c.267 0 .521-.023.76-.077.241-.052.455-.136.637-.261.182-.12.332-.283.44-.491.109-.206.162-.475.162-.798 0-.634-.179-1.085-.533-1.358-.355-.27-.831-.404-1.414-.404H4.71v3.39h2.893zm8.565-8.521c.571 0 1.088.048 1.55.144.46.097.853.241 1.18.428.324.19.575.436.755.744.178.31.267.675.267 1.093h-2.367c0-.4-.118-.734-.353-.995-.234-.262-.646-.394-1.229-.394-.312 0-.577.033-.793.097a1.491 1.491 0 0 0-.533.269 1.05 1.05 0 0 0-.299.406 1.447 1.447 0 0 0-.094.51c0 .199.034.365.094.51.064.144.173.27.328.375.156.105.363.199.623.286l.855.27c.405.125.788.269 1.146.428.358.162.677.353.957.57.28.22.5.485.665.799.163.314.242.689.242 1.124 0 .536-.102.993-.305 1.373-.202.378-.48.691-.838.938-.355.245-.775.428-1.253.55-.478.12-.999.18-1.562.18-.643 0-1.207-.056-1.689-.165-.484-.112-.886-.28-1.217-.51a2.179 2.179 0 0 1-.74-.866c-.166-.353-.25-.776-.25-1.271h2.367c0 .24.039.446.112.619a.955.955 0 0 0 .344.413c.156.105.35.18.581.225.232.045.505.068.826.068.312 0 .574-.03.786-.091.212-.064.384-.146.511-.245a.864.864 0 0 0 .286-.384c.058-.15.086-.314.086-.495a.985.985 0 0 0-.122-.51 1.151 1.151 0 0 0-.368-.368 2.96 2.96 0 0 0-.601-.287l-.83-.245a15.53 15.53 0 0 1-1.229-.421 3.5 3.5 0 0 1-.955-.533 2.207 2.207 0 0 1-.611-.757c-.143-.295-.216-.649-.216-1.063 0-.488.093-.923.28-1.301.189-.379.45-.694.786-.949.336-.253.729-.443 1.175-.571.448-.127.934-.19 1.458-.19zm-8.953-3.482h5.783v1.466h-5.783zM24 10.237v6.539c0 .506-.077.98-.232 1.423-.154.439-.395.83-.724 1.172a3.457 3.457 0 0 1-1.223.796c-.486.194-1.055.29-1.704.29-.65 0-1.214-.096-1.692-.29a3.538 3.538 0 0 1-1.229-.796 3.473 3.473 0 0 1-.743-1.172 4.052 4.052 0 0 1-.258-1.423v-6.539c0-.471.083-.922.25-1.352.166-.43.41-.812.73-1.146a3.495 3.495 0 0 1 1.229-.773 4.694 4.694 0 0 1 1.713-.284c.595 0 1.131.095 1.61.284.477.19.885.45 1.223.773.336.334.595.715.775 1.146.18.43.27.881.27 1.352zm-2.367.283c0-.327-.063-.599-.19-.824a1.59 1.59 0 0 0-.496-.533 2.15 2.15 0 0 0-.69-.297 2.891 2.891 0 0 0-.749-.091c-.268 0-.518.03-.756.091a1.89 1.89 0 0 0-.638.297 1.502 1.502 0 0 0-.446.533 1.6 1.6 0 0 0-.166.824v6.403c0 .327.056.61.166.85.108.242.258.44.446.594.19.152.408.264.651.338.245.073.51.11.795.11.285 0 .548-.037.786-.11a1.84 1.84 0 0 0 .63-.338c.174-.152.312-.352.415-.594.103-.24.154-.523.154-.85v-6.403z"/>
                          </svg>
                        </Link>
                      </>
                    )}
                  </div>
                </div>

                {/* Right side - Image */}
                <div className="relative aspect-[3/4] rounded-lg overflow-hidden slide-in-right">
                  {contactInfo?.contactImage ? (
                    <Image
                      src={urlFor(contactInfo.contactImage).width(800).height(1200).url()}
                      alt="Contact image"
                      fill
                      className="object-cover"
                    />
                  ) : (
                    <Image
                      src="/placeholder.svg"
                      alt="Contact image"
                      fill
                      className="object-cover"
                    />
                  )}
                </div>
              </div>
            </div>
          </div>
        </main>
        <Footer />
      </div>
    </div>
  )
}
